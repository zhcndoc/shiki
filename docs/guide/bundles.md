---
outline: deep
---

# 捆绑包

主要的 `shiki` 包入点通过动态导入捆绑了所有支持的主题和语言。大多数情况下，效率应该不成问题，因为语法只有在需要时才会被导入或下载。然而，当你将 shiki 捆绑到浏览器运行时或 Web Worker 中时，即使这些文件没有被导入，它们仍然会增加你的分发大小。我们提供了[细粒度捆绑](/guide/install#细粒度捆绑)以帮助你根据需要逐个组合语言和主题。

::: info
如果您正在构建一个 web 应用程序，或者在一个对性能敏感的环境中，使用 [细粒度捆绑](#fine-grained-bundle) 来减少捆绑大小和内存使用量总是更好的选择。了解更多关于 [最佳性能实践](/guide/best-performance)。
:::

## 捆绑包预设

方便起见，我们还提供了一些预制的捆绑包供你使用。

### `shiki/bundle/full`

> [捆绑包大小](/guide/#捆绑包大小)：6.4 MB (压缩后)，1.3 MB (gzip)，包含异步块

与 `shiki` 相同，这个捆绑包捆绑了所有的主题和语言。

### `shiki/bundle/web`

> [捆绑包大小](/guide/#捆绑包大小)：4.2 MB (压缩后)，748 KB (gzip)，包含异步块

这个捆绑包捆绑了所有的主题和一些常见的 Web 语言（例如 HTML、CSS、JS、TS、JSON 和 Markdown 等）以及一些框架语法（例如 Vue、JSX 和 Svelte 等）的支持。

该捆绑包中可以使用 `shiki` 的所有功能。

```ts twoslash
// @twoslash-cache: {"v":1,"hash":"bc09922b156c22ae5db0d1f3a370b9e8a8102a79c22e1cc1c2c7a69ad448c686","data":"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"}
import {
  BundledLanguage,
  BundledTheme,
  codeToHtml,
  createHighlighter
} from 'shiki/bundle/web' // [!code highlight]

const highlighter = await createHighlighter({
  langs: ['html', 'css', 'js'],
  themes: ['github-dark', 'github-light'],
})
```

## 细粒度捆绑

当导入 `shiki` 时，所有的主题和语言都会作为异步块被捆绑。通常这对你来说不会是问题，因为如果你不使用它们，它们不会被加载。在某些情况下，如果你想控制要捆绑的内容，你可以使用核心并自己组合捆绑包。

```ts twoslash
// @twoslash-cache: {"v":1,"hash":"e26334099d2c6d29154f99e9d0012a1b222bc32fc1d6530631f2db8bdeee0c9f","data":"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"}
// @noErrors
// 直接导入主题和语言模块，只有你导入的才会被捆绑。
import nord from '@shikijs/themes/nord'

// `shiki/core` 入口不包含任何主题、语言或 wasm 二进制文件。
import { createHighlighterCore } from 'shiki/core'
import { createOnigurumaEngine } from 'shiki/engine/oniguruma'

const highlighter = await createHighlighterCore({
  themes: [
    // 你需要传入导入的模块，而不是字符串
    nord,
    // 或者动态导入以实现代码分割
    import('@shikijs/themes/material-theme-ocean')
  ],
  langs: [
    import('@shikijs/langs/javascript'),
    // shiki 会尝试与默认导出互操作
    () => import('@shikijs/langs/css'),
    // 或者返回自定义语法的 getter
    async () => JSON.parse(await fs.readFile('my-grammar.json', 'utf-8'))
  ],
  // `shiki/wasm` 包含了以 base64 字符串内嵌的 wasm 二进制。
  engine: createOnigurumaEngine(import('shiki/wasm'))
})

// 可选，创建后加载主题和语言
await highlighter.loadTheme(import('@shikijs/themes/vitesse-light'))

const code = highlighter.codeToHtml('const a = 1', {
  lang: 'javascript',
  theme: 'material-theme-ocean'
})
```

::: info
[简写](/guide/install#shorthands) 只在捆绑包预设中可用。对于细粒度捆绑，你可以使用 [`createSingletonShorthands`](https://github.com/shikijs/shiki/blob/main/packages/core/src/constructors/bundle-factory.ts#L203) 自行创建简写，或者自行移植。
:::